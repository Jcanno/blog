(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{317:function(t,n,v){"use strict";v.r(n);var l=v(318),e=v.n(l);for(var i in l)["default"].indexOf(i)<0&&function(t){v.d(n,t,(function(){return l[t]}))}(i);n.default=e.a},318:function(t,n){},351:function(t,n,v){"use strict";v.d(n,"a",(function(){return l})),v.d(n,"b",(function(){return e}));var l=function(){var t=this,n=t.$createElement,v=t._self._c||n;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h3",{attrs:{id:"同源策略"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#同源策略"}},[t._v("#")]),t._v(" 同源策略")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("为什么需要同源策略？")]),t._v(" "),v("p",[t._v("没有同源策略将加大网络操作的风险，例如 B 站点的脚本访问 A 站点，获取到 A 站点的 Cookie，模拟发起请求，让 A 站点的服务端执行某些请求。或者 B 站点脚本修改 A 站点的 DOM 结构,例如表单 action，这是 B 站点可以获取到 A 站点所提交的敏感信息。")])]),t._v(" "),v("li",[v("p",[t._v("什么是同源策略?")]),t._v(" "),v("p",[t._v("限制从同一个源加载的文档或脚本与另一个源如何交互的策略")])]),t._v(" "),v("li",[v("p",[t._v("何为同源？")]),t._v(" "),v("p",[t._v("协议、主机、端口必须完全相同")])])]),t._v(" "),v("p",[t._v("同源策略提供了安全性，但降低网络通信的便利性，为提供一定的可用，体现在以下几个方面:")]),t._v(" "),v("ul",[v("li"),t._v(" "),v("li",[t._v("允许跨域写操作：例如表单提交，但可能会存在 CSRF 安全性问题")])]),t._v(" "),v("p",[t._v("从安全性考虑，同源策略禁止以下行为：")]),t._v(" "),v("ul",[v("li",[t._v("无法读取 Cookie、LocalStorage、IndexDB 中的数据")]),t._v(" "),v("li",[t._v("无法获取 DOM 或篡改 DOM 结构")]),t._v(" "),v("li",[t._v("不能发送 AJAX 请求")])]),t._v(" "),v("p",[t._v("CORS: Cross-Origin Resource Sharing")]),t._v(" "),v("p",[t._v("浏览器同源策略下跨域解决方案：通过服务端响应告知浏览器该站点是否可以跨域访问，分为两种跨域方案，简单请求跨域和复杂请求跨域：")]),t._v(" "),v("p",[t._v("何为简单请求？")]),t._v(" "),v("ul",[v("li",[t._v("GET/POST/HEAD 请求方法之一")]),t._v(" "),v("li",[t._v("仅使用 CORS 安全的头部：Accept、Accept-Language、Content-Language、Content-Type")]),t._v(" "),v("li",[t._v("Content-Type 值只能是：text/plain、multipart/form-data、application/x-www-form-urlencoded 三者之一")])]),t._v(" "),v("p",[t._v("复杂请求则会发起预检(Options)询问请求是否合法")]),t._v(" "),v("ul",[v("li",[t._v("简单请求跨域\n"),v("ul",[v("li",[t._v("请求中携带 Origin 头部告知来自哪个域")]),t._v(" "),v("li",[t._v("响应中携带 Access-Control-Allow-Origin 头部允许哪些域")]),t._v(" "),v("li",[t._v("浏览器放行")])])]),t._v(" "),v("li",[t._v("复杂请求跨域\n"),v("ul",[v("li",[t._v("预检请求头部\n"),v("ul",[v("li",[t._v("Access-Control-Request-Method")]),t._v(" "),v("li",[t._v("Access-Control-Request-Headers")])])]),t._v(" "),v("li",[t._v("预检请求响应\n"),v("ul",[v("li",[t._v("Access-Control-Allow-Method")]),t._v(" "),v("li",[t._v("Access-Control-Allow-Method")]),t._v(" "),v("li",[t._v("Access-Control-Max-Age")])])])])])])])},e=[]},352:function(t,n,v){"use strict";v.r(n);var l=v(351),e=v(317);for(var i in e)["default"].indexOf(i)<0&&function(t){v.d(n,t,(function(){return e[t]}))}(i);var _=v(42),o=Object(_.a)(e.default,l.a,l.b,!1,null,null,null);n.default=o.exports}}]);